{% extends "polls/base.html" %}

{% block title %}计算机等级考试选择题{% endblock %}


{% block navbar %}
<ul class="nav navbar-nav">
  {% if exam_page.choice_questions %}
  <li class="active"><a href="{% url 'exam:exampage-choicequestion'  exam_page.id  1 %}">选择题</a></li>
  {% endif %}
  {% if exam_page.system_operation_question %}
  <li><a href="{% url 'exam:exampage-systemquestion'  exam_page.id  %}">操作系统题</a></li>
  {% endif %}
  {% if exam_page.email_question %}
  <li><a href="{% url 'exam:exampage-emailquestion'  exam_page.id  %}">上网题</a></li>
  {% endif %}
  {% if exam_page.word_question %}
  <li><a href="{% url 'exam:exampage-wordquestion'  exam_page.id  %}">Word题</a></li>
  {% endif %}
  {% if exam_page.excel_question %}
  <li><a href="{% url 'exam:exampage-excelquestion'  exam_page.id  %}">Excel题</a></li>
  {% endif %}
  {% if exam_page.ppt_question %}
  <li><a href="{% url 'exam:exampage-pptquestion'  exam_page.id  %}">PPT题</a></li>
  {% endif %}
</ul>
{% endblock %}

{% block content %}
<HR style=" FILTER: alpha (opacity = 100, finishopacity =0 , style= 2 )" width="100%" color=#987 cb 9 SIZE=20>

<div class="card" style="width: 90%;">
  <div class="card-body">
    <h4 class="card-title">选择题(每小题{{ exam.choice_question_score }}分)</h4>
    <div class="btn-group" role="group" aria-label="choice questions">
      {% for a in choice_questions_answers %}
      {% if forloop.counter == choice_question_id %}
      <a class="btn btn-primary"
        href="{% url 'exam:exampage-choicequestion'  exam_page.id  forloop.counter %}">题{{ forloop.counter }}</a>
      {% elif a == '+' %}
      <a class="btn btn-light"
        href="{% url 'exam:exampage-choicequestion'  exam_page.id  forloop.counter %}">题{{ forloop.counter }}</a>
      {% else %}
      <a class="btn btn-success"
        href="{% url 'exam:exampage-choicequestion'  exam_page.id  forloop.counter %}">题{{ forloop.counter }}</a>
      {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<HR style=" FILTER: alpha (opacity = 100, finishopacity =0 , style= 2 )" width="100%" color=#987 cb 9 SIZE=20>

<div class="alert alert-primary" role="alert">
  <form action="" method="post">
    <p>第{{ choice_question_id }}题：{{ choice_question.question_text |linebreaks }} </p>
    <label><input name="Choice" type="radio" id='choice1' /> {{ choice_question.choice_1 }} </label> </br>
    <label><input name="Choice" type="radio" id='choice2' /> {{ choice_question.choice_2 }} </label> </br>
    <label><input name="Choice" type="radio" id='choice3' /> {{ choice_question.choice_3 }} </label> </br>
    <label><input name="Choice" type="radio" id='choice4' /> {{ choice_question.choice_4 }} </label> </br>
  </form>

  <p>当前选择：<span id="current_ans">
      {% for a in choice_questions_answers %}
      {% if forloop.counter == choice_question_id and a != '+' %}
      {{ a }}
      {% endif %}
      {% endfor %}
    </span></p>
</div>
{% endblock content %}



{% block script %}
<script type="text/javascript">
  function sendChoiceAnswer(choice_id) {
    $.ajax({
      url: '/exam/api/sendchoiceanswer/{{ exam_page.id }}/{{ choice_question_id }}/' + choice_id,
      type: 'POST',
      data: {},
      dataType: 'json',
      timeout: 10000,
      success: function (result) {
      }
    });
  }
</script>

<script type="text/javascript">
  $('#choice1').on('click', function () {
    $("#current_ans").html("1");
    sendChoiceAnswer(1);
  });
  $('#choice2').on('click', function () {
    $("#current_ans").html("2");
    sendChoiceAnswer(2);
  });
  $('#choice3').on('click', function () {
    $("#current_ans").html("3");
    sendChoiceAnswer(3);
  });
  $('#choice4').on('click', function () {
    $("#current_ans").html("4");
    sendChoiceAnswer(4);
  });
</script>
{% endblock script %}